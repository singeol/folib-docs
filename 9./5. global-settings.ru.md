# Глобальные настройки

В разделе **Глобальные настройки** можно настраивать: **Глобальную конфигурацию**, **Политику безопасности**, **LDAP**, **SSO**, **Метаданные**, **Настройки узловой дистрибуции**, **Стратегии федеративного продвижения**, **Пользовательские схемы (layout)**, **Webhook**, **Аудит** и **Глобальные расписания**.

---

## Глобальная конфигурация

### 1) Базовая информация
Администратор (**роль admin**) задаёт имя приложения, базовый URL и порт сервиса.

![Базовая информация](setting-manage-global-settings-basis-info.cbb12a72.png)

> **Подсказка**
>
> - Обычно система развёрнута во внутренней сети и публикуется наружу через прокси. В этом случае укажите публичный IP/домен в `baseurl` и порт.  
> - Изменение имени приложения автоматически отражается в конфигурационном файле.  
> - `baseurl`: используйте при обратном проксировании.  
> - `folib-Server`: порт бэкенд‑сервиса.

### 2) SMTP
Настройте системную почту: логин, пароль, `HOST`, порт и протокол.

![SMTP](setting-manage-global-setting-basis-smtp.66261478.png)

> **Подсказка**
>
> Некоторые события в системе сопровождаются почтовыми уведомлениями.

### 3) Сетевой прокси
Глобальный прокси платформы (proxy). Параметры:
- **Пользователь прокси** — имя для аутентификации на прокси.
- **Пароль прокси** — пароль для аутентификации.
- **Адрес прокси** — IP/домен прокси‑сервера.
- **Порт** — например, `8080`.
- **Тип прокси** — `HTTP`, `SOCKS4/SOCKS5`, **прозрачный**, **анонимный**.

![Сетевой прокси](setting-manage-global-setting-basis-net-proxy.0e330e7b.png)

> **Подсказка**
>
> Правильная настройка критична для корректной работы прокси.  
> **Сценарии:** нет прямого выхода в Интернет → настраиваем прокси, чтобы:  
> • обращаться к публичным ресурсам,  
> • скачивать зависимости из внешних репозиториев через прокси.

### 4) CORS
Политика междоменных запросов. Укажите разрешённые источники либо включите глобальное разрешение (кнопка **Включить**), чтобы снять ограничения происхождения.

![CORS](setting-manage-global-setting-basis-cors.02eb1a59.png)

---

## Политика безопасности

Откройте: **Настройки → Глобальные настройки → Политика безопасности**.

### 1) Белый список
Позволяет помечать уязвимости/лицензии как доверенные (с выбором срока действия):
- В течение срока действия записи игнорируются системой и не вызывают тревоги.
- Подходит для случаев подтверждённого отсутствия риска.

![Белый список](global-settings-safe-white.964ad801.gif)

> **Подсказка**
>
> Доступны белые списки для **уязвимостей** и **лицензий**.

### 2) Чёрный список
Жёсткий контроль высокорисковых артефактов:
- Добавляйте **уязвимости**, **лицензии** и **пакеты** (срок действия обязателен).
- На срок действия загрузка и использование будут **заблокированы**.

![Чёрный список](global-settings-safe-black.e1f1d27c.gif)

> **Подсказка**
>
> Поддерживается ограничение по версиям пакета, например **`<= 2.1.10`** — все версии до и включая 2.1.10 блокируются, более новые доступны.

### 3) Уведомления
Настройте глобальную схему оповещений:
- Порог уровня риска,
- Кого уведомлять,
- Условия срабатывания.

![Уведомления](setting-manage-global-setting-safe-notice.e6219eb5.png)

### 4) Стратегии блокировки
Автоматические правила блокировки:
- **Блокировка по репозиторию**,
- **По чёрным/белым спискам уязвимостей**,
- **По имени пакета** (точное соответствие/правила версий),
- **По чёрно‑/белому списку лицензий**.

![Блокирование](global-settings-safe-block.a775f667.gif)

---

## LDAP

Для SSO по корпоративному каталогу: заполните базовые настройки, затем перейдите к сопоставлению ролей пользователей.

![LDAP](global-settings-ldap.5d5356bb.gif)

---

## Лицензирование узла

После получения лицензии вставьте содержимое сертификата в поле справа и нажмите **Активировать**.

![Лицензия узла](global-settings-node.20259cda.png)

> **Подсказка**
>
> - Для **боевой** активации требуется Интернет.  
> - **Пробная** активация — до 1 месяца, без Интернета.  
> - Если хост без доступа наружу — используйте глобальный прокси на машине с доступом в Интернет для активации.

---

## SSO

Добавляйте клиентские записи для перенаправления аутентификации в стороннюю систему.

![SSO](global-setting-sso.e6080b15.png)  
![Добавить клиента](global-setting-sso-add.007b2ac7.png)

**Поля:**
- `clientId` — уникальный ID клиента.
- **Название клиента**.
- **URL входа** — страница SSO от третьей стороны.
- **URL выхода** — endpoint для logout (очистка сессии на стороне провайдера).
- **URL редиректа после выхода**.
- **URL редиректа после входа**.
- **URL получения токена** — endpoint выдачи access token.
- **Описание** — произвольный комментарий к настройке.

---

## Метаданные

Справочник типов пользовательских метаданных артефактов (появляется в выпадающем списке при редактировании метаданных).

![Метаданные](global-setting-meta-data.62c0e5ea.gif)

---

## Узловая дистрибуция

Настройте **внутренние** и **внешние** узлы кластера для дистрибуции/репликации.

![Внутренние узлы](global-setting-inner-node.b5954f46.png)  
![Внешние узлы](global-settings-outer-node.d135e050.png)

---

## Федеративные стратегии продвижения

Список стратегий с указанием исходных/целевых репозиториев, даты создания и автора. Доступно создание, редактирование и удаление стратегий.

![Федеративное продвижение](global-settings-federal-promotion.78e9db71.png)

---

## Пользовательские схемы (Layout)

Общий список всех пользовательских схем хранения. Можно редактировать существующие и создавать новые.

![Layout](global-settings-customize-layout.ae2de6f3.png)

---

## Webhook

Задайте URL, заголовок **X-Token** (токен доступа) и выберите события‑триггеры.

![Webhook](global-settings-webhook.4c65d856.png)  
![Добавление webhook](global-settings-webhook-add.a0f990f3.png)

**События:**
- Загрузка артефакта,
- Обновление артефакта (повторная загрузка той же версии),
- Скачивание артефакта,
- Удаление артефакта,
- Удаление каталога,
- **Безопасностная блокировка** (скачивание заблокировано политикой).

---

## Аудит

Глобальные параметры аудита для: **репозиториев**, **системных настроек**, **расширенных операций**, **управления пользователями**.

![Аудит](global-settings-audit.f5ef6e39.gif)

---

## Глобальные расписания

Настройка плановых задач для репозиториев на уровне всей платформы.

![Расписания](global-settings-time.ff3652c7.gif)
